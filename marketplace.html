<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BUDAYA KOL - Marketplace Budaya</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<style>
body { background-color: #fdfbf7; font-family: 'Poppins', sans-serif; }

/* HEADER */
.header-batik {
  background-image: url('https://budayago.id/assets/719c91840397c58ac8b9c7ee1ed2325cd77bed0d-CtUbZrnW.png');
  background-size: cover; height: 100px;
}
.header-logo {
  background: rgba(0,0,0,0.75); padding: 20px 0;
  text-align: center; color: #fff; font-weight: 700; font-size: 28px;
}
.header-logo span { color: #ffb100; }

/* NAVBAR */
.navbar { background-color: #222 !important; }
.navbar .points-box, .navbar .cart-box {
  background: #ffb100; color: #222; border-radius: 20px;
  padding: 5px 15px; font-weight: 600;
}
.cart-box { cursor: pointer; margin-left: 15px; }

/* MARKETPLACE GRID */
.market-section { margin-top: 50px; }
.market-section h2 {
  text-align: center; font-weight: 700; color: #222; margin-bottom: 30px;
}

/* PRODUK */
.product-card {
  border: 1px solid #eee; border-radius: 16px;
  overflow: hidden; background: #fff;
  transition: 0.3s; display: flex; flex-direction: column; height: 100%;
}
.product-card:hover {
  box-shadow: 0 6px 16px rgba(0,0,0,0.08);
  transform: translateY(-3px);
}
.product-card img { width: 100%; height: 200px; object-fit: cover; }
.product-card .info { flex-grow: 1; padding: 15px; }
.product-card h6 { font-weight: 600; font-size: 16px; color: #333; }
.product-card p { font-size: 14px; color: #666; }
.product-card .btn { border-radius: 8px; }

/* CART MODAL */
.modal-content { border-radius: 16px; }
.cart-item { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.cart-item img { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; }
.cart-item span { font-size: 14px; }

/* RANKING */
.media-card {
  border-radius: 12px; border: 1px solid #eee; overflow: hidden;
  background: #fff; transition: 0.3s;
}
.media-card:hover { transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
.media-thumb { width: 100%; height: 220px; object-fit: cover; }
.rank-badge {
  position: absolute; top: 10px; left: 10px; background: #ffc107;
  padding: 5px 12px; border-radius: 20px; font-weight: 600;
}
.vote-btn { border-radius: 10px; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header-batik"></div>
<div class="header-logo"><span>BUDAYA</span> Marketplace</div>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#"><i class="bi bi-shop text-warning"></i> kampanye punaindonesia.id</a>
    <div class="ms-auto d-flex align-items-center">
      <div class="points-box">
        <i class="bi bi-coin me-1"></i> Poin: <strong id="userPoints">250</strong>
      </div>
      <div class="cart-box" data-bs-toggle="modal" data-bs-target="#cartModal">
        <i class="bi bi-cart3 me-1"></i> <span id="cartCount">0</span> Barang
      </div>
    </div>
  </div>
</nav>

<div class="container py-5">

  <!-- PRODUK SECTION -->
  <section class="market-section">
    <h2><i class="bi bi-bag-check"></i> Produk Lokal Pilihan</h2>
    <div class="row g-4" id="productList"></div>
  </section>

  <!-- RANKING SECTION -->
  <section class="market-section">
    <h2><i class="bi bi-bar-chart-line"></i> Top Karya Budaya</h2>
    <div id="mediaList" class="row g-4"></div>
  </section>

</div>

<!-- CART MODAL -->
<div class="modal fade" id="cartModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="bi bi-cart3"></i> Keranjang Belanja</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body" id="cartItems"></div>
      <div class="modal-footer d-flex justify-content-between">
        <div>Total: <strong id="cartTotal">0</strong> poin</div>
        <button class="btn btn-warning text-dark fw-semibold" onclick="checkout()">Checkout</button>
      </div>
    </div>
  </div>
</div>

<script>
let userPoints = 250;
let cart = [];

// Produk Dummy
const products = [
  { id: 1, name: 'Fashion - Kain Batik Modern', points: 100, img: 'https://i0.wp.com/zaloraadmin.wpcomstaging.com/wp-content/uploads/2023/10/model-baju-batik.png?fit=1200%2C620&ssl=1' },
  { id: 2, name: 'Kriya - Tas Anyaman Rotan Bali', points: 150, img: 'https://www.harapanrakyat.com/wp-content/uploads/2020/11/Tas-Rotan-Bali-Buat-Tampilan-Menarik-dan-Lebih-Unik.jpg' },
  { id: 3, name: 'Kuliner - Kopi Nusantara', points: 80, img: 'https://i.gojekapi.com/darkroom/gofood-indonesia/v2/images/uploads/360b7f14-e648-40a4-a417-8937212352f9_IMG_20210619_104035_708.jpg' }
];

const uploads = [
  { id: 1, title: 'Kain Batik Mega Mendung', type: 'image', src: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSXzhtKFI6zDKi5AdUMqyjbQVUXnPwPYg7JNQ&s', votes: 15 },
  { id: 2, title: 'Video Tari Kecak Bali', type: 'image', src: 'https://awsimages.detik.net.id/community/media/visual/2020/08/25/tari-kecak-1_169.jpeg?w=1200', votes: 22 },
  { id: 3, title: 'Ukiran Kayu Jepara', type: 'image', src: 'https://tempatwisatajeparablog.wordpress.com/wp-content/uploads/2017/01/kaligrafi1.jpg', votes: 10 }
];

// Render Produk
function renderProducts(){
  document.getElementById('productList').innerHTML = products.map(p=>`
    <div class="col-sm-6 col-lg-4">
      <div class="product-card">
        <img src="${p.img}" alt="${p.name}">
        <div class="info">
          <h6>${p.name}</h6>
          <p>Tukar dengan <strong>${p.points}</strong> poin</p>
        </div>
        <div class="p-3 pt-0 d-grid gap-2">
          <button class="btn btn-outline-warning text-dark fw-semibold" onclick="addToCart(${p.id})">
            <i class="bi bi-cart-plus"></i> Tambah ke Keranjang
          </button>
          <button class="btn btn-warning text-dark fw-semibold" onclick="buyNow(${p.id})">
            <i class="bi bi-bag-check"></i> Beli Sekarang
          </button>
        </div>
      </div>
    </div>
  `).join('');
}

// Tambah ke Keranjang
function addToCart(id){
  const p = products.find(p=>p.id===id);
  cart.push(p);
  updateCartUI();
}

// Beli Sekarang
function buyNow(id){
  const p = products.find(p=>p.id===id);
  if(userPoints >= p.points){
    userPoints -= p.points;
    document.getElementById('userPoints').innerText = userPoints;
    alert(`ðŸŽ‰ Kamu membeli ${p.name}!`);
  } else alert('âŒ Poin tidak cukup.');
}

// Update Cart UI
function updateCartUI(){
  document.getElementById('cartCount').innerText = cart.length;
  const cartItems = document.getElementById('cartItems');
  let total = 0;
  cartItems.innerHTML = cart.map(item=>{
    total += item.points;
    return `
      <div class="cart-item">
        <img src="${item.img}">
        <span>${item.name}</span>
        <span class="text-warning fw-semibold">${item.points} pts</span>
      </div>`;
  }).join('') || '<p class="text-muted text-center">Keranjang kosong</p>';
  document.getElementById('cartTotal').innerText = total;
}

// Checkout
function checkout(){
  let total = cart.reduce((sum,i)=>sum+i.points,0);
  if(total === 0) return alert('Keranjang kosong.');
  if(userPoints < total) return alert('âŒ Poin tidak cukup untuk checkout.');
  userPoints -= total;
  document.getElementById('userPoints').innerText = userPoints;
  cart = [];
  updateCartUI();
  alert('âœ… Checkout berhasil!');
}

// Render Ranking
function renderRanking(){
  uploads.sort((a,b)=>b.votes - a.votes);
  document.getElementById('mediaList').innerHTML = uploads.map((u,i)=>`
    <div class="col-sm-6 col-lg-4">
      <div class="media-card position-relative">
        <span class="rank-badge">#${i+1}</span>
        <img src="${u.src}" class="media-thumb">
        <div class="p-3">
          <h6 class="fw-semibold mb-1">${u.title}</h6>
          <p class="text-muted small mb-2">${u.votes} suara</p>
          <button class="btn btn-outline-warning vote-btn w-100" onclick="vote(${u.id})">
            <i class="bi bi-hand-thumbs-up"></i> Vote
          </button>
        </div>
      </div>
    </div>
  `).join('');
}
function vote(id){ const item = uploads.find(u=>u.id===id); if(item){ item.votes++; renderRanking(); } }

renderProducts();
renderRanking();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
