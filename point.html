<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BUDAYA KOL - Upload & Tukar Poin</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
<style>
body {
  background-color: #faf8f5;
  font-family: 'Poppins', sans-serif;
}
/* ====== HEADER ====== */
.header-batik {
  background-image: url('https://budayago.id/assets/719c91840397c58ac8b9c7ee1ed2325cd77bed0d-CtUbZrnW.png');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  height: 100px;
}
.header-logo {
  background: rgba(0,0,0,0.7);
  padding: 20px 0;
  color: white;
  text-align: center;
  font-weight: 700;
  letter-spacing: 1px;
  font-size: 28px;
}
.header-logo span {
  color: #ffb100;
}
/* ====== NAVBAR ====== */
.navbar {
  background-color: #222 !important;
}
/* ====== SECTION TITLE ====== */
.section-title {
  text-align: center;
  font-weight: 700;
  margin-top: 50px;
  margin-bottom: 30px;
  color: #222;
}
/* ====== UPLOAD AREA ====== */
.drop-area {
  border: 2px dashed #c6a76d;
  border-radius: 15px;
  background: #fffdf8;
  padding: 40px;
  text-align: center;
  transition: all 0.3s ease;
  cursor: pointer;
}
.drop-area.dragover {
  background: #fff4d8;
  border-color: #c89100;
}
.drop-area i {
  font-size: 50px;
  color: #c89100;
}
#preview img, #preview video {
  width: 100%;
  max-height: 300px;
  border-radius: 12px;
  object-fit: cover;
  margin-top: 20px;
}
/* ====== PRODUCT CARDS ====== */
.product-card {
  border-radius: 12px;
  border: 1px solid #eee;
  background: #fff;
  text-align: center;
  padding: 20px;
  transition: 0.3s;
}
.product-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}
.product-card img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  border-radius: 10px;
}
/* ====== RANKING ====== */
.media-card {
  border: 1px solid #eee;
  border-radius: 12px;
  overflow: hidden;
  transition: 0.2s;
  background: #fff;
}
.media-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.08);
}
.media-thumb {
  width: 100%;
  height: 200px;
  object-fit: cover;
}
.vote-btn, .exchange-btn {
  border-radius: 30px;
}
.rank-badge {
  position: absolute;
  top: 10px;
  left: 10px;
  background: #ffc107;
  padding: 5px 12px;
  border-radius: 30px;
  font-weight: 600;
}
</style>
</head>
<body>

<!-- HEADER -->
<div class="header-batik"></div>
<div class="header-logo">
  <span>BUDAYA</span> KOL - Platform Kreatif Nusantara
</div>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#"><i class="bi bi-stars text-warning"></i> Budaya.ID</a>
    <div class="d-flex ms-auto text-white">
      <i class="bi bi-coin text-warning me-2"></i> 
      <span>Poin Anda: <strong id="userPoints">250</strong></span>
    </div>
  </div>
</nav>

<div class="container py-5">

  <!-- UPLOAD -->
  <h2 class="section-title">Upload Karya Budaya (Video / Foto)</h2>
  <div class="drop-area" id="dropArea">
    <i class="bi bi-cloud-arrow-up"></i>
    <p class="mt-3 mb-1 fw-semibold">Tarik dan Lepas Karya Anda di sini</p>
    <p class="text-muted small">Atau klik untuk memilih file foto/video</p>
    <input type="file" id="fileInput" accept="image/*,video/*" hidden>
  </div>
  <div id="preview"></div>
  <button id="uploadBtn" class="btn btn-warning mt-3 w-100 text-dark fw-semibold" disabled>
    <i class="bi bi-upload"></i> Upload Karya
  </button>

  <!-- PRODUK -->
  <h2 class="section-title">Kategori Produk Lokal</h2>
  <div class="row g-4" id="productList"></div>

  <!-- RANKING -->
  <h2 class="section-title">Ranking Polling Terbanyak</h2>
  <div id="mediaList" class="row gy-4"></div>

</div>

<script>
// === Elemen DOM ===
const dropArea = document.getElementById('dropArea');
const fileInput = document.getElementById('fileInput');
const preview = document.getElementById('preview');
const uploadBtn = document.getElementById('uploadBtn');
const mediaList = document.getElementById('mediaList');
const productList = document.getElementById('productList');
let selectedFile = null;
let userPoints = 250;

// === Data Dummy ===
let uploads = [
  {id:1, title:'Kain Batik Mega Mendung', type:'image', src:'https://picsum.photos/600/400?random=2', votes:15},
  {id:2, title:'Video Tari Kecak Bali', type:'video', src:'https://www.w3schools.com/html/mov_bbb.mp4', votes:22},
  {id:3, title:'Ukiran Kayu Jepara', type:'image', src:'https://picsum.photos/600/400?random=3', votes:10}
];
let products = [
  {id:1, name:'Fashion - Kain Batik Modern', points:100, img:'https://picsum.photos/seed/fashion/600/400'},
  {id:2, name:'Kriya - Tas Anyaman Rotan', points:150, img:'https://picsum.photos/seed/craft/600/400'},
  {id:3, name:'Kuliner - Kopi Nusantara', points:80, img:'https://picsum.photos/seed/food/600/400'}
];

// === Drag & Drop ===
dropArea.addEventListener('click', ()=>fileInput.click());
dropArea.addEventListener('dragover', (e)=>{
  e.preventDefault();
  dropArea.classList.add('dragover');
});
dropArea.addEventListener('dragleave', ()=>dropArea.classList.remove('dragover'));
dropArea.addEventListener('drop', (e)=>{
  e.preventDefault();
  dropArea.classList.remove('dragover');
  const file = e.dataTransfer.files[0];
  handleFile(file);
});
fileInput.addEventListener('change', (e)=>{
  const file = e.target.files[0];
  handleFile(file);
});

function handleFile(file){
  if(!file) return;
  selectedFile = file;
  uploadBtn.disabled = false;
  const type = file.type.startsWith('image') ? 'image' : 'video';
  const url = URL.createObjectURL(file);
  preview.innerHTML = type === 'image' 
    ? `<img src="${url}" alt="preview">`
    : `<video src="${url}" controls></video>`;
}

// === Upload Karya ===
uploadBtn.addEventListener('click', ()=>{
  if(!selectedFile) return alert('Silakan pilih file terlebih dahulu.');
  const type = selectedFile.type.startsWith('image') ? 'image' : 'video';
  const newItem = {
    id: uploads.length + 1,
    title: selectedFile.name,
    type,
    src: URL.createObjectURL(selectedFile),
    votes: 0
  };
  uploads.push(newItem);
  selectedFile = null;
  preview.innerHTML = '';
  uploadBtn.disabled = true;
  renderRanking();
  alert('ðŸŽ‰ Karya berhasil diupload!');
});

// === Voting ===
function vote(id) {
  const idx = uploads.findIndex(u=>u.id===id);
  if(idx>-1){
    uploads[idx].votes++;
    renderRanking();
  }
}

// === Tukar Produk ===
function exchange(id){
  const product = products.find(p=>p.id===id);
  if(userPoints >= product.points){
    userPoints -= product.points;
    document.getElementById('userPoints').innerText = userPoints;
    alert(`ðŸŽ Anda berhasil menukar ${product.name}!`);
  } else {
    alert("âŒ Poin Anda tidak cukup untuk menukar produk ini.");
  }
}

// === Render Ranking ===
function renderRanking() {
  uploads.sort((a,b)=>b.votes - a.votes);
  mediaList.innerHTML = uploads.map((item,i)=>{
    return `
      <div class="col-md-4">
        <div class="media-card position-relative">
          <span class="rank-badge">#${i+1}</span>
          ${ item.type === 'image' 
            ? `<img src="${item.src}" class="media-thumb">`
            : `<video class="media-thumb" controls src="${item.src}"></video>` }
          <div class="p-3">
            <h6 class="fw-semibold mb-1">${item.title}</h6>
            <p class="text-muted small mb-2">${item.votes} suara</p>
            <button class="btn btn-outline-warning vote-btn w-100" onclick="vote(${item.id})">
              <i class="bi bi-hand-thumbs-up"></i> Vote
            </button>
          </div>
        </div>
      </div>`;
  }).join('');
}

// === Render Produk ===
function renderProducts() {
  productList.innerHTML = products.map(p=>{
    return `
      <div class="col-md-6 col-lg-4">
        <div class="product-card">
          <img src="${p.img}" alt="produk">
          <h6 class="fw-semibold mt-3">${p.name}</h6>
          <p class="text-muted small mb-3">Tukar dengan <strong>${p.points}</strong> poin</p>
          <button class="btn btn-outline-warning exchange-btn w-100 text-dark fw-semibold" onclick="exchange(${p.id})">
            <i class="bi bi-arrow-left-right"></i> Tukar
          </button>
        </div>
      </div>`;
  }).join('');
}

// Inisialisasi render
renderRanking();
renderProducts();
</script>

</body>
</html>
